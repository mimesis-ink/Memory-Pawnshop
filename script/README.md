# 章节分析工具

本目录包含用于检查章节质量的分析脚本。

## 脚本说明

### 1. analyze_duplicates.py
检查章节中的重复内容。

**功能**:
- 检查章节标题是否重复
- 查找完全重复的段落
- 查找高度相似的段落（相似度 >= 85%）
- 查找跨章节重复的句子

**使用方法**:
```bash
cd script
python3 analyze_duplicates.py
```

**输出**:
- 重复内容列表
- 相似段落对比
- 重复句子统计

### 2. analyze_logic.py
检查章节的逻辑一致性。

**功能**:
- 分析章节结构（黄金三秒、结尾钩子、字数）
- 检查角色出场的一致性
- 检查时间线的连续性
- 统计地点使用情况
- 追踪关键情节点

**使用方法**:
```bash
cd script
python3 analyze_logic.py
```

**输出**:
- 章节结构问题
- 角色连续性问题
- 时间线问题
- 地点统计
- 情节统计

## 检查流程

建议在以下时机运行检查:

1. **每完成10章**: 运行两个脚本检查最新内容
2. **重大修改后**: 确保修改没有引入新问题
3. **提交前**: 最终质量检查

## 结果文档

检查结果保存在 `docs/` 目录:

- `CHAPTER_ANALYSIS_REPORT.md` - 完整的分析报告
- `IMPROVEMENT_RECOMMENDATIONS.md` - 改进建议

## 依赖

脚本使用 Python 3 标准库，无需额外安装依赖:
- `os` - 文件操作
- `re` - 正则表达式
- `collections` - 数据结构
- `difflib` - 相似度计算
- `hashlib` - 哈希计算

## 自定义配置

可以修改脚本中的参数:

### analyze_duplicates.py
- `threshold`: 相似度阈值（默认 0.85）
- 段落最小长度: 20字符
- 句子最小长度: 10字符

### analyze_logic.py
- 字数范围: 1800-2000字
- 角色消失阈值: 15章
- 时间关键词列表

## 扩展建议

未来可以添加的功能:

1. **词汇多样性分析**: 检查是否过度使用某些词汇
2. **对话比例分析**: 统计对话与叙述的比例
3. **情节节奏分析**: 检查悬念点的分布
4. **角色发展追踪**: 分析角色成长曲线
5. **自动生成时间线图**: 可视化故事时间线

## 问题反馈

如果发现脚本的误报或有改进建议，请在 GitHub Issues 中反馈。
